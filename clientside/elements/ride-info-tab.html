<link rel="import" href="/components/core-collapse/core-collapse.html">


<polymer-element name="ride-info-tab" attributes="ride">
  <template>
    <style>
    :host {
      display: block;
      width: 100%;
    }
    #content {
      margin: 2px;
    }
    #description {
      padding: .5em;
      white-space: pre-line;
    }
    th, td {
      font-size: 90%;
    }
    th {
      text-align: right;
    }
    ul {
      margin: 0;
    }
    </style>

    <div id="content">
      <template if="{{ride.facts.length}}">
        <section>
	  <table cellpadding="3">
	    <template repeat="{{fact in ride.facts}}">
    	      <tr><th>{{fact[0]}}</th><td>{{fact[1]}}</td></tr>
	    </template>
	  </table>
        </section>
      </template>

      <section id="description"><template repeat="{{descPart in ride.description}}"
         >{{descPart}}</template></section>

      <template if="{{ride.tips.length}}">
        <section>
	  <h3>Tips</h3>
	  <ul>
   	    <template repeat="{{tip in ride.tips}}">
    	      <li>{{tip}}</li>
	    </template>
	  </ul>
        </section>
      </template>
      
      <section id="sources">
	<p class="unimportant" on-click="{{toggle}}">Sources</p>
	<core-collapse id="collapse">
	  <ul>
   	    <template repeat="{{src in ride.sources}}">
    	      <li><a href="{{src.href}}">{{src.label}}</a></li>
	    </template>
          </ul>
	</core-collapse>
      </section>
      
    </div>

  </template>

  <script>
  Polymer({
    ride: {},

    rideChanged: function() {
      if (this.ride.sources && this.ride.sources.length) {
        this.$.sources.style.display = '';
      } else {
        this.$.sources.style.display = 'none';
      }
    },

    toggle: function() {
      this.$.collapse.toggle();
    }
  });
  </script>
</polymer-element>
